require 'httparty'
require 'nokogiri'

urls = %w{
/zh/exchanges/coinbasepro/
/zh/exchanges/kucoin/
/zh/exchanges/okex/
/zh/exchanges/crypto-com-exchange/
/zh/exchanges/gemini/
/zh/exchanges/mexc/
/zh/exchanges/binance/
/zh/exchanges/bitget/
/zh/exchanges/bigone/
/zh/exchanges/whitebit/
/zh/exchanges/upbit/
/zh/exchanges/bybit/
/zh/exchanges/bitstamp/
/zh/exchanges/bitmart/
/zh/exchanges/poloniex/
/zh/exchanges/bitfinex/
/zh/exchanges/bitmax/
/zh/exchanges/binance-us/
/zh/exchanges/gate-io/
/zh/exchanges/bitflyer/
/zh/exchanges/kraken/
/zh/exchanges/shuzibi/
/zh/exchanges/bitmex/
/zh/exchanges/latoken/
/zh/exchanges/bitcoin-indonesia/
/zh/exchanges/huobipro/
/zh/exchanges/coinw/
/zh/exchanges/coinex/
/zh/exchanges/coinone/
/zh/exchanges/bithumb/
/zh/exchanges/uniswap/
/zh/exchanges/bitbank/
/zh/exchanges/pancakeswap-v2/
/zh/exchanges/uniswapv3/
/zh/exchanges/bingx/
/zh/exchanges/hitbtc/
/zh/exchanges/yobit/
/zh/exchanges/etorox/
/zh/exchanges/coincheck/
/zh/exchanges/probit-exchange/
/zh/exchanges/blockchain/
/zh/exchanges/paribu/
/zh/exchanges/sushiswap/
/zh/exchanges/exmo/
/zh/exchanges/binance-tr/
/zh/exchanges/gmo/
/zh/exchanges/stormgain/
/zh/exchanges/tokocrypto/
/zh/exchanges/id-upbit/
/zh/exchanges/coindcx/
/zh/exchanges/coinlistpro/
/zh/exchanges/luno/
/zh/exchanges/raydium/
/zh/exchanges/bitkub/
/zh/exchanges/bitso/
/zh/exchanges/bib-exchange/
/zh/exchanges/th-upbit/
/zh/exchanges/lbank/
/zh/exchanges/zaif/
/zh/exchanges/indoex/
/zh/exchanges/bit2me/
/zh/exchanges/wootrade/
/zh/exchanges/changelly-pro/
/zh/exchanges/jupiter/
/zh/exchanges/p2pb2b/
/zh/exchanges/coinsbit/
/zh/exchanges/fastex/
/zh/exchanges/8v-global/
/zh/exchanges/mexo-exchange/
/zh/exchanges/btc-markets/
/zh/exchanges/jbexcom/
/zh/exchanges/btcturk-pro/
/zh/exchanges/zebpay/
/zh/exchanges/fmfw-io/
/zh/exchanges/korbit/
/zh/exchanges/binance-dex/
/zh/exchanges/remitano/
/zh/exchanges/traderjoe/
/zh/exchanges/btcbox/
/zh/exchanges/deribit/
/zh/exchanges/mercado-bitcoin/
/zh/exchanges/young-platform/
/zh/exchanges/max/
/zh/exchanges/bitbns/
/zh/exchanges/prime-xbt/
/zh/exchanges/rekeningku-com/
/zh/exchanges/hkd-com/
/zh/exchanges/bitpanda-pro/
/zh/exchanges/difx/
/zh/exchanges/kanga/
/zh/exchanges/okcoin-jp/
/zh/exchanges/cryptology/
/zh/exchanges/bitvavo/
/zh/exchanges/valr/
/zh/exchanges/finexbox/
/zh/exchanges/dydx/
/zh/exchanges/buyucoin/
/zh/exchanges/giottus/
/zh/exchanges/mdex/
/zh/exchanges/unocoin/
/zh/exchanges/spookyswap/
/zh/exchanges/deversifi/
/zh/exchanges/huobi-japan/
/zh/exchanges/flitpay/
/zh/exchanges/spiritswap/
/zh/exchanges/coinbase-international/
/zh/exchanges/superex/
/zh/exchanges/nonkyc/
/zh/exchanges/hashkey-global/
/zh/exchanges/pancakeswap-v3-bsc/
/zh/exchanges/pancakeswap-v3-eth/
/zh/exchanges/tapbit/
/zh/exchanges/weex/
/zh/exchanges/bityard/
/zh/exchanges/azbit/
/zh/exchanges/coinstore/
/zh/exchanges/idcm/
/zh/exchanges/btse/
/zh/exchanges/bitrue/
/zh/exchanges/crmclick/
/zh/exchanges/bifinance/
/zh/exchanges/xt/
/zh/exchanges/bitunix/
/zh/exchanges/qmall/
/zh/exchanges/deepcoin/
/zh/exchanges/phemex/
/zh/exchanges/bitdelta/
/zh/exchanges/websea/
/zh/exchanges/mandala-exchange/
/zh/exchanges/dextrade/
/zh/exchanges/catex/
/zh/exchanges/bilaxy/
/zh/exchanges/hashkey-pro/
/zh/exchanges/c-patex/
/zh/exchanges/icrypex/
/zh/exchanges/bit-com/
/zh/exchanges/koinbazar/
/zh/exchanges/dexzbitz/
/zh/exchanges/binance-th/
/zh/exchanges/bittime/
/zh/exchanges/independent-reserve/
/zh/exchanges/vindax/
/zh/exchanges/bitopro/
/zh/exchanges/tokpie/
/zh/exchanges/coins-ph/
/zh/exchanges/novadax/
/zh/exchanges/bankcex/
/zh/exchanges/bitexlive/
/zh/exchanges/zondacrypto/
/zh/exchanges/mudrex/
/zh/exchanges/gopax/
/zh/exchanges/justswap/
/zh/exchanges/bitcointry-exchange/
/zh/exchanges/foxbit/
/zh/exchanges/bitlo/
/zh/exchanges/cetoex/
/zh/exchanges/uex/
/zh/exchanges/aevo/
/zh/exchanges/ripio/
/zh/exchanges/flipster/
/zh/exchanges/safetrade/
/zh/exchanges/bancor-network/
/zh/exchanges/satang-pro/
/zh/exchanges/oceanex/
/zh/exchanges/waves-exchange/
/zh/exchanges/mdex-bsc/
/zh/exchanges/1inch-liquidity-protocol/
/zh/exchanges/50x/
/zh/exchanges/aave/
/zh/exchanges/aboard-exchange/
/zh/exchanges/acdx/
/zh/exchanges/ace/
/zh/exchanges/alterdice/
/zh/exchanges/anyswap/
/zh/exchanges/aprobit/
/zh/exchanges/artis-turba/
/zh/exchanges/aryana/
/zh/exchanges/ataix/
/zh/exchanges/atomars/
/zh/exchanges/babyswap/
/zh/exchanges/bakeryswap/
/zh/exchanges/bamboo-relay/
/zh/exchanges/bbox/
/zh/exchanges/beaxy/
/zh/exchanges/bepswap/
/zh/exchanges/bibox/
/zh/exchanges/biconomy/
/zh/exchanges/bidesk/
/zh/exchanges/binance-jex/
/zh/exchanges/birake-network/
/zh/exchanges/biswap-v3/
/zh/exchanges/bit4you/
/zh/exchanges/bitay/
/zh/exchanges/bitci/
/zh/exchanges/bitclude/
/zh/exchanges/bitcoiva/
/zh/exchanges/bitexbook/
/zh/exchanges/bitexen/
/zh/exchanges/bitfront/
/zh/exchanges/bithumb-singapore/
/zh/exchanges/bitribe/
/zh/exchanges/bitsonic/
/zh/exchanges/bitsten/
/zh/exchanges/bitubu/
/zh/exchanges/bitvast/
/zh/exchanges/bloctoswap/
/zh/exchanges/blofin/
/zh/exchanges/btc-exchange/
/zh/exchanges/bunicorn/
/zh/exchanges/cashierest/
/zh/exchanges/chainx/
/zh/exchanges/chiliz/
/zh/exchanges/coincasso/
/zh/exchanges/coinfield/
/zh/exchanges/coinhako/
/zh/exchanges/coinhe/
/zh/exchanges/coinswitch-kuber/
/zh/exchanges/cointr-pro/
/zh/exchanges/coinzo/
/zh/exchanges/coinzoom/
/zh/exchanges/comethswap/
/zh/exchanges/compound/
/zh/exchanges/convergence/
/zh/exchanges/coredax/
/zh/exchanges/crex24/
/zh/exchanges/crosstower/
/zh/exchanges/crypterum/
/zh/exchanges/cybex-dex/
/zh/exchanges/decoin/
/zh/exchanges/defichain-dex/
/zh/exchanges/delta-exchange/
/zh/exchanges/demex/
/zh/exchanges/dfyn-network/
/zh/exchanges/digitalexchange-id/
/zh/exchanges/dodo-bsc/
/zh/exchanges/dove-wallet/
/zh/exchanges/dsdaq/
/zh/exchanges/ecxx/
/zh/exchanges/emirex/
/zh/exchanges/emx/
/zh/exchanges/eqonex/
/zh/exchanges/exir/
/zh/exchanges/exnomy/
/zh/exchanges/fameex/
/zh/exchanges/farhadmarket/
/zh/exchanges/felixo/
/zh/exchanges/flata-exchange/
/zh/exchanges/folgory/
/zh/exchanges/ftx-us/
/zh/exchanges/gdac/
/zh/exchanges/globitex/
/zh/exchanges/gokumarket/
/zh/exchanges/hanbitco/
/zh/exchanges/hibt/
/zh/exchanges/honeyswap/
/zh/exchanges/hotbit-korea/
/zh/exchanges/huobiindonesia/
/zh/exchanges/idex-bsc/
/zh/exchanges/islandswap/
/zh/exchanges/julswap/
/zh/exchanges/kickex/
/zh/exchanges/klayswap/
/zh/exchanges/kulap/
/zh/exchanges/kwikswap/
/zh/exchanges/kyberswap/
/zh/exchanges/kyberswap-avalanche/
/zh/exchanges/kyberswap-bsc/
/zh/exchanges/kyberswap-ethereum/
/zh/exchanges/linkswap/
/zh/exchanges/liquid/
/zh/exchanges/loopring-exchange/
/zh/exchanges/luaswap/
/zh/exchanges/mento/
/zh/exchanges/mercatox/
/zh/exchanges/mm-finance-cronos/
/zh/exchanges/mm-finance-polygon/
/zh/exchanges/moonxbt/
/zh/exchanges/mov/
/zh/exchanges/msamex-exchange/
/zh/exchanges/namebase/
/zh/exchanges/narkasa/
/zh/exchanges/nash-exchange/
/zh/exchanges/nicehash/
/zh/exchanges/nominex/
/zh/exchanges/nut-money/
/zh/exchanges/omgfin/
/zh/exchanges/onus/
/zh/exchanges/openocean/
/zh/exchanges/orca/
/zh/exchanges/osmosis/
/zh/exchanges/pancakeswap/
/zh/exchanges/pancakeswap-aptos/
/zh/exchanges/pancakeswap-v3-zkevm/
/zh/exchanges/pangolin/
/zh/exchanges/paybito/
/zh/exchanges/perpetual-protocol/
/zh/exchanges/pionex/
/zh/exchanges/plasmaswap/
/zh/exchanges/polonidex/
/zh/exchanges/polyx/
/zh/exchanges/polyzap/
/zh/exchanges/prizmbit/
/zh/exchanges/qtrade/
/zh/exchanges/quickswap/
/zh/exchanges/resfinex/
/zh/exchanges/robinhood/
/zh/exchanges/safemoon-swap/
/zh/exchanges/sashimiswap/
/zh/exchanges/satoexchange/
/zh/exchanges/secondbtc/
/zh/exchanges/serenity/
/zh/exchanges/serum-dex/
/zh/exchanges/sinegy-marketplace/
/zh/exchanges/stakecube/
/zh/exchanges/sushiswap-arbitrum/
/zh/exchanges/sushiswap-celo/
/zh/exchanges/sushiswap-ftm/
/zh/exchanges/sushiswap-harmony/
/zh/exchanges/sushiswap-matic/
/zh/exchanges/sushiswap-v2-base/
/zh/exchanges/sushiswap-v3-base/
/zh/exchanges/sushiswap-xdai/
/zh/exchanges/swipeswap/
/zh/exchanges/terraswap/
/zh/exchanges/thorchain-bep20/
/zh/exchanges/thorchain-btc/
/zh/exchanges/thorchain-erc20/
/zh/exchanges/thruster-v2-1/
/zh/exchanges/thruster-v2-3/
/zh/exchanges/thruster-v3/
/zh/exchanges/tidex/
/zh/exchanges/timex/
/zh/exchanges/tokenize-xchange/
/zh/exchanges/tokenlon/
/zh/exchanges/tokensets/
/zh/exchanges/toobit/
/zh/exchanges/tradeogre/
/zh/exchanges/triv-pro/
/zh/exchanges/trontrade/
/zh/exchanges/txbit/
/zh/exchanges/unicly/
/zh/exchanges/unisat/
/zh/exchanges/uniswap-v3-arbitrum/
/zh/exchanges/uniswap-v3-base/
/zh/exchanges/uniswap-v3-bsc/
/zh/exchanges/uniswap-v3-optimism/
/zh/exchanges/uniswap-v3-polygon/
/zh/exchanges/valimarket/
/zh/exchanges/velic/
/zh/exchanges/venus/
/zh/exchanges/virtuse-exchange/
/zh/exchanges/wanswap/
/zh/exchanges/wazirx/
/zh/exchanges/xcalibra/
/zh/exchanges/xeggex/
/zh/exchanges/xtheta-global/
/zh/exchanges/yetiswap/
/zh/exchanges/zipmex/
}

def get_exchange_link url
  begin
    response = HTTParty.get(url,
      headers: {
        'User-Agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
      },
      timeout: 10
    )

    # 使用 Nokogiri 解析 HTML
    doc = Nokogiri::HTML(response.body)

    # 查找包含网站链接的元素
    # <div class="sc-5f158b2f-1 iMWfrF"><div class="sc-4c05d6ef-0 dlQYLv"><ul class="sc-f26a20b8-0 cSOQbu cmc-details-panel-links"><li><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="18px" width="18px" viewBox="0 0 24 24" color="neutral5" title="LinkIcon" class="sc-4c05d6ef-0 dnddEP"><path d="M11.877 15.9787C11.8146 16.8242 11.4524 17.6196 10.8555 18.2217L9.94675 19.1305C9.27191 19.7958 8.36141 20.1672 7.41381 20.1638C6.46621 20.1604 5.5584 19.7825 4.88834 19.1124C4.21828 18.4423 3.84034 17.5345 3.83695 16.5868C3.83355 15.6392 4.20497 14.7287 4.87021 14.0538L5.779 13.145C6.38116 12.5483 7.1765 12.186 8.02192 12.1235L9.67229 10.4731C8.76285 10.2319 7.80611 10.2331 6.89728 10.4766C5.98845 10.72 5.15923 11.1973 4.49215 11.8608L3.58335 12.7697C2.56946 13.7837 1.99991 15.159 2 16.5929C2.00009 18.0269 2.5698 19.4021 3.5838 20.416C4.59781 21.43 5.97305 21.9995 7.40698 21.9994C8.84092 21.9994 10.2161 21.4296 11.23 20.4156L12.1388 19.5068C12.802 18.8395 13.279 18.0102 13.5225 17.1014C13.7659 16.1926 13.7673 15.236 13.5265 14.3265L11.877 15.9787Z"></path><path d="M15.9793 11.8768C16.8248 11.8144 17.6202 11.4522 18.2222 10.8553L19.131 9.9465C19.7963 9.27163 20.1677 8.3611 20.1643 7.41348C20.1609 6.46585 19.783 5.55801 19.1129 4.88793C18.4429 4.21786 17.535 3.83991 16.5874 3.83651C15.6398 3.83312 14.7293 4.20455 14.0545 4.8698L13.1457 5.77863C12.549 6.3808 12.1868 7.17616 12.1242 8.02161L10.4738 9.67203C10.2327 8.76256 10.2339 7.80579 10.4773 6.89693C10.7208 5.98807 11.198 5.15883 11.8616 4.49173L12.7704 3.58291C13.7844 2.56899 15.1596 1.99943 16.5935 1.99951C18.0275 1.9996 19.4027 2.56932 20.4165 3.58336C21.4304 4.5974 22 5.97267 21.9999 7.40665C21.9998 8.84063 21.4301 10.2158 20.4161 11.2298L19.5073 12.1386C18.84 12.8018 18.0108 13.2789 17.102 13.5223C16.1932 13.7658 15.2366 13.7672 14.3271 13.5264L15.9793 11.8768Z"></path><path d="M8.36434 16.5441C8.18462 16.5441 8.00895 16.4907 7.85954 16.3909C7.71012 16.291 7.59367 16.1491 7.5249 15.983C7.45613 15.817 7.43814 15.6343 7.47319 15.458C7.50824 15.2817 7.59476 15.1198 7.72182 14.9927L14.9922 7.72213C15.1636 7.55658 15.3932 7.46498 15.6315 7.46705C15.8697 7.46912 16.0977 7.5647 16.2662 7.7332C16.4347 7.9017 16.5302 8.12965 16.5323 8.36794C16.5344 8.60623 16.4428 8.8358 16.2772 9.00721L9.00686 16.2778C8.83646 16.4483 8.60535 16.544 8.36434 16.5441Z"></path></svg><a lang="en" dir="ltr" rel="nofollow noopener" href="https://www.foblgate.com/" target="_blank">https://www.foblgate.com/</a></li><li><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="18px" width="18px" viewBox="0 0 24 24" color="neutral5" title="Fees" class="sc-4c05d6ef-0 dnddEP"><path d="M20.25 19.4349H19.5V13.1738H18V19.4349H15V13.1738H13.5V19.4349H10.5V13.1738H9V19.4349H6V13.1738H4.5V19.4349H3.75C3.336 19.4349 3 19.7847 3 20.2175C3 20.6503 3.336 21.0001 3.75 21.0001H20.25C20.664 21.0001 21 20.6503 21 20.2175C21 19.7847 20.664 19.4349 20.25 19.4349Z"></path><path d="M20.6092 7.79137L12.3593 3.09558C12.135 2.96879 11.865 2.96879 11.6407 3.09558L3.39075 7.79137C3.15 7.92833 3 8.19207 3 8.47852V10.8264C3 11.2592 3.336 11.609 3.75 11.609H20.25C20.664 11.609 21 11.2592 21 10.8264V8.47852C21 8.19207 20.85 7.92833 20.6092 7.79137ZM12 9.26115C11.1713 9.26115 10.5 8.56069 10.5 7.69588C10.5 6.83108 11.1713 6.13062 12 6.13062C12.8287 6.13062 13.5 6.83108 13.5 7.69588C13.5 8.56069 12.8287 9.26115 12 9.26115Z"></path></svg><a lang="en" rel="nofollow noopener" href="https://www.foblgate.com/fees" target="_blank">Fees</a></li><li><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" height="18px" width="18px" viewBox="0 0 24 24" color="neutral5" title="Twitter" class="sc-4c05d6ef-0 dnddEP"><path d="M17.1761 4H19.9362L13.9061 10.7774L21 20H15.4456L11.0951 14.4066L6.11723 20H3.35544L9.80517 12.7508L3 4H8.69545L12.6279 9.11262L17.1761 4ZM16.2073 18.3754H17.7368L7.86441 5.53928H6.2232L16.2073 18.3754Z" fill="currentColor"></path></svg><a lang="en" dir="ltr" rel="nofollow noopener" href="https://twitter.com/fobl_official" target="_blank">@fobl_official</a></li></ul><div class="sc-65e7f566-0 iXDfeX"><div class="sc-65e7f566-0 ehpACV base-text">Do you work for FOBLGATE?</div><div class="sc-65e7f566-0 cWkmuk"><a href="https://support.coinmarketcap.com/hc/en-us/articles/16945563933723-CMC-Priority-CMCP-for-page-updates" target="_blank" rel="noreferrer"><svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" class="sc-65e7f566-0 jftUyC c-i" loading="lazy" decode="async" priority="low"><use href="#edit"></use></svg>&nbsp;<!-- -->Update Exchange Info</a><a href="https://support.coinmarketcap.com/hc/en-us/requests/new?ticket_form_id=360000553552" target="_blank" rel="noreferrer"><svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" class="sc-65e7f566-0 jftUyC c-i" loading="lazy" decode="async" priority="low"><use href="#audit-icon"></use></svg>&nbsp;<!-- -->Submit Reserve Data</a></div></div></div><div class="sc-4c05d6ef-0 dlQYLv"><div class="sc-fd47dc68-0 fBGNdK"><h2 color="text" data-sensors-click="true" class="sc-8852f96f-0 htwfrX">About FOBLGATE</h2><div class="sc-5f3326dd-0 cQTTgP"><div><p>Founded in January 2019 and launched in July of the same year, FOBLGATE has established itself as a premier centralized cryptocurrency exchange in South Korea. Operating under the vision of "A New Challenge and Innovation in Finance," the exchange has rapidly emerged as a market leader in Korea.</p><h2 id="key-characteristics">Key Characteristics:</h2><ul><li>Regulatory Compliance: Obtained Information Security Management System (ISMS) certification and completed reporting to the Financial Intelligence Unit (FIU) in compliance with the Special Financial Transaction Information Act implemented in September 2021.</li><li>Security System: Developed an Anti-Money Laundering (AML) system in collaboration with GT1, which has experience building AML systems for 100 domestic and international companies, including Samsung Securities and Kakao Bank.</li><li>Travel Rule Compliance: Implemented a dual-track Travel Rule solution by adopting 'Verify VASP' from Lambda256 and CODE, ensuring advanced transaction security and transparency.</li></ul><h2 id="market-share">Market Share:</h2><p>As of April 2024, FOBLGATE leads the cryptocurrency exchange market with a 93.81% market share among the NON-KRW exchanges with trading volume.</p><h2 id="recent-developments">Recent developments:</h2><ul><li>Received on-site consulting from the Financial Supervisory Service(FSS) in March 2024 and completed preliminary document submission for Virtual Asset Service Provider (VASP) renewal in September.</li><li>In February 2024, initiated secure deposit and withdrawal services with Binance through Verify VASP's account owner verification service.</li></ul><h2 id="unique-positioning">Unique Positioning:</h2><p>FOBLGATE has established itself as a key player in the Korean cryptocurrency market by consistently focusing on:</p><ul><li>Regulatory compliance</li><li>Advanced security measures</li><li>Technological innovation.</li><li>Transparent operational practices</li></ul><p>The exchange continues to evolve, positioning itself as a reliable and forward-thinking platform in the rapidly changing cryptocurrency ecosystem</p></div></div></div><div class="sc-fd47dc68-1 nNuSh">Read More<!-- --> <svg xmlns="http://www.w3.org/2000/svg" fill="none" height="16px" width="16px" viewBox="0 0 24 24" class="sc-4c05d6ef-0 bhVhAi"><path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div>
    # 匹配注释中提供的HTML结构：
    #
    website_link = nil
    # 首先查找具有特定类名的ul元素
    details_panel = doc.css('ul[class*="cmc-details-panel-links"]').first

    # 在该ul元素中查找所有符合条件的a标签
    links = details_panel.css('a[rel="nofollow noopener"]')
    # 过滤出网站链接（排除Twitter和Fees链接）
    website_link = links.find do |link|
      href = link['href']
      href && href.start_with?('http') && !href.include?('twitter.com') && !href.include?('fees')
    end

    website_url = website_link['href']
    puts "== website_url:  #{website_url.inspect}"
  rescue => e
    puts "#{url}: Error - #{e.message}"
  end

end

urls.each do |url|
  get_exchange_link "https://coinmarketcap.com#{url}"
end

